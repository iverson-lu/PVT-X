<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml">
    
    <!-- ========================================
         WINDOWS 11 STYLE NAVIGATION ITEM
         Borderless, context-driven selection
         ======================================== -->
    
    <Style x:Key="CompactNavButtonStyle" TargetType="{x:Type ui:Button}">
        <Setter Property="Height" Value="46"/>
        <Setter Property="Width" Value="60"/>
        <Setter Property="Margin" Value="4,4"/>
        <Setter Property="HorizontalAlignment" Value="Center"/>
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="Padding" Value="0"/>
        <Setter Property="Cursor" Value="Hand"/>
        <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
        <Setter Property="KeyboardNavigation.IsTabStop" Value="True"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ui:Button}">
                    <Grid Background="Transparent">
                        <!-- Left Accent Bar - Hidden by default -->
                        <Rectangle x:Name="AccentBar"
                                   Width="2"
                                   HorizontalAlignment="Left"
                                   Fill="{DynamicResource PrimaryBrush}"
                                   Opacity="0"
                                   RadiusX="1" RadiusY="1"/>
                        
                        <!-- Content Area - No border, no rounded corners on normal state -->
                        <Grid x:Name="ContentArea" Margin="2,0,0,0">
                            <Rectangle x:Name="BackgroundRect"
                                       Fill="Transparent"
                                       RadiusX="4" RadiusY="4"/>
                            
                            <ContentPresenter x:Name="IconPresenter"
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center"
                                            Content="{TemplateBinding Icon}"
                                            TextElement.Foreground="{DynamicResource NavIconNormalBrush}"
                                            TextElement.FontSize="22"/>
                        </Grid>
                    </Grid>
                    
                    <ControlTemplate.Triggers>
                        <!-- Hover State - Very subtle -->
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="BackgroundRect" Property="Fill" Value="{DynamicResource NavItemHoverBrush}"/>
                            <Setter TargetName="IconPresenter" Property="TextElement.Foreground" Value="{DynamicResource NavIconHoverBrush}"/>
                        </Trigger>
                        
                        <!-- Pressed State - Same as hover, no button effect -->
                        <Trigger Property="IsPressed" Value="True">
                            <Setter TargetName="BackgroundRect" Property="Fill" Value="{DynamicResource NavItemHoverBrush}"/>
                            <Setter TargetName="BackgroundRect" Property="Opacity" Value="0.7"/>
                        </Trigger>
                        
                        <!-- Keyboard Focus - No visual change -->
                        <Trigger Property="IsFocused" Value="True">
                            <!-- Focus handled by system, no additional visual needed -->
                        </Trigger>
                        
                        <!-- Disabled State -->
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter TargetName="IconPresenter" Property="TextElement.Foreground" Value="{DynamicResource TextDisabledBrush}"/>
                            <Setter Property="Cursor" Value="Arrow"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    
    <!-- ========================================
         SELECTED NAVIGATION ITEM STYLE
         Context indicator, not button pressed state
         ======================================== -->
    
    <Style x:Key="CompactNavButtonSelectedStyle" TargetType="{x:Type ui:Button}">
        <Setter Property="Height" Value="46"/>
        <Setter Property="Width" Value="60"/>
        <Setter Property="Margin" Value="4,4"/>
        <Setter Property="HorizontalAlignment" Value="Center"/>
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="Padding" Value="0"/>
        <Setter Property="Cursor" Value="Hand"/>
        <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
        <Setter Property="KeyboardNavigation.IsTabStop" Value="True"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ui:Button}">
                    <Grid Background="Transparent">
                        <!-- Left Accent Bar - VISIBLE for selected state -->
                        <Rectangle x:Name="AccentBar"
                                   Width="2"
                                   HorizontalAlignment="Left"
                                   Fill="{DynamicResource PrimaryBrush}"
                                   Opacity="1"
                                   RadiusX="1" RadiusY="1"/>
                        
                        <!-- Content Area - Subtle accent background, no border -->
                        <Grid x:Name="ContentArea" Margin="2,0,0,0">
                            <Rectangle x:Name="BackgroundRect"
                                       Fill="{DynamicResource NavItemSelectedBackgroundBrush}"
                                       RadiusX="4" RadiusY="4"/>
                            
                            <ContentPresenter x:Name="IconPresenter"
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center"
                                            Content="{TemplateBinding Icon}"
                                            TextElement.Foreground="{DynamicResource PrimaryBrush}"
                                            TextElement.FontSize="22"
                                            TextElement.FontWeight="SemiBold"/>
                        </Grid>
                    </Grid>
                    
                    <ControlTemplate.Triggers>
                        <!-- Hover on selected - Slightly stronger tint, still no border -->
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="BackgroundRect" Property="Fill" Value="{DynamicResource NavItemSelectedHoverBrush}"/>
                        </Trigger>
                        
                        <!-- Pressed on selected - No visual change, already selected -->
                        <Trigger Property="IsPressed" Value="True">
                            <Setter TargetName="BackgroundRect" Property="Fill" Value="{DynamicResource NavItemSelectedHoverBrush}"/>
                            <Setter TargetName="BackgroundRect" Property="Opacity" Value="0.9"/>
                        </Trigger>
                        
                        <!-- Keyboard Focus on selected - No visual change -->
                        <Trigger Property="IsFocused" Value="True">
                            <!-- Focus handled by system, no additional visual needed -->
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    
    <!-- ========================================
         BADGE STYLE FIX
         Custom template for Secondary appearance
         ======================================== -->
    
    <Style TargetType="{x:Type ui:Badge}" BasedOn="{StaticResource {x:Type ui:Badge}}">
        <Style.Triggers>
            <Trigger Property="Appearance" Value="Secondary">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type ui:Badge}">
                            <Border Background="{DynamicResource BadgeBackgroundBrush}" 
                                    BorderBrush="{DynamicResource BadgeBorderBrush}" 
                                    BorderThickness="1"
                                    CornerRadius="4"
                                    Padding="6,2">
                                <TextBlock Text="{TemplateBinding Content}" 
                                          Foreground="{DynamicResource BadgeTextBrush}"
                                          FontSize="11"
                                          FontWeight="Medium"
                                          VerticalAlignment="Center"
                                          HorizontalAlignment="Center"/>
                            </Border>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Trigger>
        </Style.Triggers>
    </Style>
    
    <!-- Required Badge Style (red variant, same style as Secondary) -->
    <Style x:Key="RequiredBadgeStyle" TargetType="{x:Type ui:Badge}" BasedOn="{StaticResource {x:Type ui:Badge}}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ui:Badge}">
                    <Border Background="{DynamicResource RequiredBadgeBackgroundBrush}" 
                            BorderBrush="{DynamicResource RequiredBadgeBorderBrush}" 
                            BorderThickness="1"
                            CornerRadius="4"
                            Padding="6,2">
                        <TextBlock Text="{TemplateBinding Content}" 
                                  Foreground="{DynamicResource RequiredBadgeTextBrush}"
                                  FontSize="11"
                                  FontWeight="Medium"
                                  VerticalAlignment="Center"
                                  HorizontalAlignment="Center"/>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    
    <!-- Tag Badge Style (neutral gray variant) -->
    <Style x:Key="TagBadgeStyle" TargetType="{x:Type ui:Badge}" BasedOn="{StaticResource {x:Type ui:Badge}}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ui:Badge}">
                    <Border Background="{DynamicResource TagBadgeBackgroundBrush}" 
                            BorderBrush="{DynamicResource TagBadgeBorderBrush}" 
                            BorderThickness="1"
                            CornerRadius="4"
                            Padding="6,2">
                        <TextBlock Text="{TemplateBinding Content}" 
                                  Foreground="{DynamicResource TagBadgeTextBrush}"
                                  FontSize="11"
                                  FontWeight="Medium"
                                  VerticalAlignment="Center"
                                  HorizontalAlignment="Center"/>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- ========================================
         ENVIRONMENT EDITOR STYLES
         Clean list layout and compact inputs
         ======================================== -->

    <Style x:Key="EnvEditorListContainerStyle" TargetType="Border">
        <Setter Property="Background" Value="{DynamicResource ControlBackgroundSecondaryBrush}"/>
        <Setter Property="BorderBrush" Value="{DynamicResource BorderSubtleBrush}"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="CornerRadius" Value="{StaticResource RadiusM}"/>
    </Style>

    <Style x:Key="EnvEditorListViewStyle" TargetType="ListView">
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="Padding" Value="0"/>
        <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Disabled"/>
        <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Auto"/>
    </Style>

    <Style x:Key="EnvEditorListViewItemStyle" TargetType="ListViewItem">
        <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
        <Setter Property="Padding" Value="12,6"/>
        <Setter Property="BorderBrush" Value="{DynamicResource BorderSubtleBrush}"/>
        <Setter Property="BorderThickness" Value="0,0,0,1"/>
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="MinHeight" Value="40"/>
        <Setter Property="SnapsToDevicePixels" Value="True"/>
        <Style.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="Background" Value="{DynamicResource InteractiveHoverBrush}"/>
            </Trigger>
            <Trigger Property="IsSelected" Value="True">
                <Setter Property="Background" Value="{DynamicResource InteractiveSelectedBrush}"/>
            </Trigger>
        </Style.Triggers>
    </Style>

    <Style x:Key="EnvEditorTextBoxStyle" TargetType="{x:Type TextBox}" BasedOn="{StaticResource ModernTextBoxStyle}">
        <Setter Property="Height" Value="34"/>
        <Setter Property="Padding" Value="10,0"/>
        <Setter Property="FontSize" Value="{StaticResource FontSizeM}"/>
    </Style>

    <Style x:Key="EnvEditorKeyTextBoxStyle" TargetType="{x:Type TextBox}" BasedOn="{StaticResource EnvEditorTextBoxStyle}">
        <Style.Triggers>
            <DataTrigger Binding="{Binding HasError}" Value="True">
                <Setter Property="BorderBrush" Value="{DynamicResource StatusErrorBrush}"/>
                <Setter Property="BorderThickness" Value="2"/>
                <Setter Property="ToolTip" Value="{Binding Error}"/>
            </DataTrigger>
        </Style.Triggers>
    </Style>

    <Style x:Key="EnvEditorToolbarButtonStyle" TargetType="{x:Type ui:Button}">
        <Setter Property="Appearance" Value="Secondary"/>
        <Setter Property="Height" Value="32"/>
        <Setter Property="Padding" Value="12,0"/>
        <Setter Property="Margin" Value="0,0,8,0"/>
    </Style>

    <Style x:Key="EnvEditorIconButtonStyle" TargetType="{x:Type ui:Button}">
        <Setter Property="Appearance" Value="Secondary"/>
        <Setter Property="Width" Value="28"/>
        <Setter Property="Height" Value="28"/>
        <Setter Property="Padding" Value="0"/>
        <Setter Property="Margin" Value="8,0,0,0"/>
    </Style>
    
    <!-- ========================================
         SEGMENTED CONTROL (PILL-STYLE TABS)
         Modern navigation tabs with rounded container
         ======================================== -->
    
    <Style x:Key="SegmentedControlTabItem" TargetType="{x:Type TabItem}">
        <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="Padding" Value="20,10"/>
        <Setter Property="Margin" Value="0"/>
        <Setter Property="HorizontalContentAlignment" Value="Center"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type TabItem}">
                    <Border x:Name="Border"
                            Background="{TemplateBinding Background}"
                            BorderThickness="0"
                            CornerRadius="8"
                            Padding="{TemplateBinding Padding}"
                            Margin="2">
                        <ContentPresenter x:Name="ContentSite"
                                        ContentSource="Header"
                                        HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                        VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                        TextElement.Foreground="{DynamicResource TextSecondaryBrush}"
                                        TextElement.FontSize="14"
                                        TextElement.FontWeight="Normal"/>
                    </Border>
                    
                    <ControlTemplate.Triggers>
                        <!-- Hover State -->
                        <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="IsMouseOver" Value="True"/>
                                <Condition Property="IsSelected" Value="False"/>
                            </MultiTrigger.Conditions>
                            <Setter TargetName="Border" Property="Background" Value="{DynamicResource TabHoverBackgroundBrush}"/>
                        </MultiTrigger>
                        
                        <!-- Selected State -->
                        <Trigger Property="IsSelected" Value="True">
                            <Setter TargetName="Border" Property="Background" Value="{DynamicResource TabSelectedBackgroundBrush}"/>
                            <Setter TargetName="Border" Property="Effect">
                                <Setter.Value>
                                    <DropShadowEffect Color="{DynamicResource ShadowColor}" BlurRadius="6" ShadowDepth="1" Direction="270" Opacity="0.25"/>
                                </Setter.Value>
                            </Setter>
                            <Setter TargetName="ContentSite" Property="TextElement.Foreground" Value="{DynamicResource TextPrimaryBrush}"/>
                            <Setter TargetName="ContentSite" Property="TextElement.FontWeight" Value="Medium"/>
                        </Trigger>
                        
                        <!-- Selected + Hover -->
                        <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="IsMouseOver" Value="True"/>
                                <Condition Property="IsSelected" Value="True"/>
                            </MultiTrigger.Conditions>
                            <Setter TargetName="Border" Property="Background" Value="{DynamicResource TabSelectedHoverBackgroundBrush}"/>
                        </MultiTrigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    
    <Style x:Key="SegmentedControlTabControl" TargetType="{x:Type TabControl}">
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="Padding" Value="0"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type TabControl}">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        
                        <!-- Tab Headers Container (Segmented Control) -->
                        <Border Grid.Row="0"
                                Background="{DynamicResource TabContainerBackgroundBrush}"
                                CornerRadius="10"
                                Padding="4"
                                HorizontalAlignment="Left"
                                Margin="0,0,0,8">
                            <StackPanel Orientation="Horizontal"
                                       IsItemsHost="True"/>
                        </Border>
                        
                        <!-- Tab Content Area -->
                        <Border Grid.Row="1"
                                Background="{TemplateBinding Background}"
                                BorderThickness="0">
                            <ContentPresenter ContentSource="SelectedContent"/>
                        </Border>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    
    <!-- ========================================
         TOGGLE SWITCH STYLE FOR CHECKBOX
         Modern toggle appearance without 3rd-party libs
         ======================================== -->
    
    <Style x:Key="ToggleSwitchCheckBoxStyle" TargetType="{x:Type CheckBox}">
        <Setter Property="Cursor" Value="Hand"/>
        <Setter Property="VerticalAlignment" Value="Center"/>
        <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type CheckBox}">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        
                        <!-- Toggle Track -->
                        <Border x:Name="Track"
                                Grid.Column="0"
                                Width="40"
                                Height="20"
                                Background="{DynamicResource ControlFillColorDefaultBrush}"
                                BorderBrush="{DynamicResource ControlStrokeColorDefaultBrush}"
                                BorderThickness="1"
                                CornerRadius="10">
                            
                            <!-- Toggle Thumb -->
                            <Canvas>
                                <Ellipse x:Name="Thumb"
                                        Width="14"
                                        Height="14"
                                        Fill="{DynamicResource TextFillColorPrimaryBrush}"
                                        Canvas.Left="3"
                                        Canvas.Top="3">
                                    <Ellipse.RenderTransform>
                                        <TranslateTransform x:Name="ThumbTranslate" X="0"/>
                                    </Ellipse.RenderTransform>
                                </Ellipse>
                            </Canvas>
                        </Border>
                        
                        <!-- Optional Content (not used in our case) -->
                        <ContentPresenter Grid.Column="1"
                                        Margin="8,0,0,0"
                                        VerticalAlignment="Center"
                                        RecognizesAccessKey="True"/>
                    </Grid>
                    
                    <ControlTemplate.Triggers>
                        <!-- Checked State -->
                        <Trigger Property="IsChecked" Value="True">
                            <Setter TargetName="Track" Property="Background" Value="{DynamicResource PrimaryBrush}"/>
                            <Setter TargetName="Track" Property="BorderBrush" Value="{DynamicResource PrimaryBrush}"/>
                            <Setter TargetName="Thumb" Property="Fill" Value="White"/>
                            <Trigger.EnterActions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="ThumbTranslate"
                                                       Storyboard.TargetProperty="X"
                                                       To="20"
                                                       Duration="0:0:0.15">
                                            <DoubleAnimation.EasingFunction>
                                                <CubicEase EasingMode="EaseOut"/>
                                            </DoubleAnimation.EasingFunction>
                                        </DoubleAnimation>
                                    </Storyboard>
                                </BeginStoryboard>
                            </Trigger.EnterActions>
                            <Trigger.ExitActions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="ThumbTranslate"
                                                       Storyboard.TargetProperty="X"
                                                       To="0"
                                                       Duration="0:0:0.15">
                                            <DoubleAnimation.EasingFunction>
                                                <CubicEase EasingMode="EaseOut"/>
                                            </DoubleAnimation.EasingFunction>
                                        </DoubleAnimation>
                                    </Storyboard>
                                </BeginStoryboard>
                            </Trigger.ExitActions>
                        </Trigger>
                        
                        <!-- Hover State -->
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="Track" Property="BorderBrush" Value="{DynamicResource ControlStrokeColorSecondaryBrush}"/>
                        </Trigger>
                        
                        <!-- Disabled State -->
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter TargetName="Track" Property="Opacity" Value="0.4"/>
                            <Setter Property="Cursor" Value="Arrow"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    
</ResourceDictionary>
